---
const { title, subtitle, description, participants = 0, slug } = Astro.props;
const safeParticipants = Math.max(0, participants);
const href = slug ? `/app/grupo/${slug}` : '#';
---

<article class="scroll-fade flex flex-col gap-4 rounded-3xl border border-[var(--color-border)] bg-[var(--color-surface)] px-6 py-6 shadow-[0_12px_24px_rgba(109,76,65,0.12)]">
	<header class="flex items-center justify-between">
		<div>
			<h3 class="text-lg font-semibold text-[var(--color-text)]">{title}</h3>
			<p class="text-[0.8rem] text-[var(--color-text-muted)]">{subtitle}</p>
		</div>
		<span class="text-sm font-medium text-[var(--color-text-muted)]">{safeParticipants} participantes</span>
	</header>

	<div class="h-2 w-full overflow-hidden rounded-full bg-[rgba(42,157,143,0.15)]">
		<div
			class="h-full rounded-full bg-[var(--color-primary)]"
			style={`width: ${Math.min(safeParticipants, 30) / 30 * 100}%`}
		/>
	</div>

	<p class="text-sm text-[var(--color-text-muted)]">{description}</p>
	<a
		href={href}
		class="scroll-fade inline-flex items-center gap-2 self-start rounded-full bg-[rgba(230,57,70,0.12)] px-4 py-2 text-xs font-semibold text-[var(--color-primary)] hover:text-[var(--color-primary)]"
	>
		Ver grupo
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-4 w-4">
			<path
				fill-rule="evenodd"
				d="M3.75 10a.75.75 0 0 1 .75-.75h8.69L10.22 6.281a.75.75 0 1 1 1.06-1.062l4.25 4.25a.75.75 0 0 1 0 1.062l-4.25 4.25a.75.75 0 1 1-1.06-1.062l2.97-2.969H4.5A.75.75 0 0 1 3.75 10z"
				clip-rule="evenodd"
			/>
		</svg>
	</a>
</article>
